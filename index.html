<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MBTI Quiz</title>
    <style>
        /* Optional: Add some basic styling */
        *{
            font-family: sans-serif;
        }
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            
        }
        h4{
            font-size: 80%;
            text-align: center;
        }
        .questions-container {
            margin-bottom: 20px;
            width: 100%;
            height: fit-content;
            
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        .questions-container div {
            margin-bottom: 10px;
        }
        button{
            height: 70px;
            margin-bottom: 20px;
            font-size: 20px;
        }
        .results {
            margin-top: 20px;
            border-top: 1px solid #ccc;
            padding-top: 10px;
            display: flex;
            flex-direction: column;
        }
        input{
            align-self: center;
        }
        .hidden{
            display: none;
        }
        .question-container{
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            border-width: 2px;
            border-color: black;
            padding: 10px;
            border-radius: 10px;
            width: 80%;
            margin: 10px;
            background-color: blanchedalmond;
        }
        .bodyback{
            background-color: #333333;
        }
        h3{
            width: 80%;
        }
        .reminder{
            text-align: center;
            background-color: rgb(212, 209, 209);
            padding: 10px;
            border: 10px;
            border-radius: 10px;
            width: 80%;
            height: fit-content;
            margin: 10px;
        }
        .reminder-text{
            color: rgb(123, 5, 5);
        }
    </style>
</head>
<body class = "bodyback">
    <div class="reminder"><spin class="reminder-text">````*REMINDER: please answer ALL questions tactfully as this website doesn't tolerate toying with the algorithm, yet it provides accurate results based on the answers provided.*````</spin></div>
    <div class="results hidden">
        <!-- Results will be displayed here -->
    </div>
    <div class="questions-container">
        <!-- Questions will be dynamically added here -->
    </div>
    <button class="submit" style="background-color: blanchedalmond; border-radius: 10px;">
        Submit
    </button>
    <button class="previous hidden" style="background-color: blanchedalmond; border-radius: 10px;">
        Previous
    </button>

    <script>
        // Arrays for each cognitive function
        const Niq = [
          "I frequently think about the future and long-term possibilities.",
          "I have sudden insights or 'aha' moments.",
          "I prefer to work through ideas and plans internally before discussing them.",
          "I feel a strong sense of purpose and direction in life.",
          "I enjoy abstract concepts and theoretical discussions.",
          "I often sense patterns and underlying meanings in various situations.",
          "I experience vivid daydreams and visualizations.",
          "I trust my gut feelings and hunches.",
          "I am motivated by my personal visions and aspirations.",
          "I find joy in solving complex problems and puzzles."
        ];

        const Neq = [
          "I am constantly generating new ideas and possibilities.",
          "I enjoy brainstorming and exploring multiple options.",
          "I often see connections and relationships between seemingly unrelated things.",
          "I love engaging in spontaneous and open-ended discussions.",
          "I am energized by novelty and change.",
          "I frequently come up with creative solutions to problems.",
          "I get excited about starting new projects and ventures.",
          "I enjoy imagining different scenarios and outcomes.",
          "I am curious and eager to learn about a wide variety of topics.",
          "I thrive in environments that encourage innovation and exploration."
        ];

        const Seq = [
          "I am highly aware of my surroundings and notice details easily.",
          "I enjoy engaging in physical activities and experiences.",
          "I thrive on being in the moment and acting spontaneously.",
          "I am energized by sensory experiences and stimulation.",
          "I often seek out new and exciting experiences.",
          "I have a keen sense of aesthetics and appreciate beauty in the world around me.",
          "I am quick to respond to changes in my environment.",
          "I enjoy taking risks and embracing challenges.",
          "I prefer hands-on learning and doing things practically.",
          "I am drawn to activities that involve action and movement."
        ];

        const Siq = [
          "I have a strong memory for details and past experiences.",
          "I find comfort in routines and familiar patterns.",
          "I pay close attention to practical details and specifics.",
          "I value stability and reliability in my life.",
          "I enjoy organizing and categorizing information.",
          "I am good at recalling facts and specific information.",
          "I notice when things are out of place or not as they should be.",
          "I prefer tried-and-true methods and traditions.",
          "I am conscientious and meticulous in my work.",
          "I have a deep appreciation for nostalgia and sentimental items."
        ];

        const Teq = [
          "I enjoy analyzing and understanding how things work.",
          "I value logical consistency and coherence in ideas.",
          "I prefer to solve problems independently and methodically.",
          "I strive for precision and accuracy in my reasoning.",
          "I am skilled at identifying flaws or inconsistencies in arguments.",
          "I enjoy exploring theoretical frameworks and models.",
          "I am cautious about making decisions until I have thoroughly analyzed the situation.",
          "I am fascinated by abstract concepts and theories.",
          "I prioritize understanding concepts deeply over memorizing facts.",
          "I am driven to create logical systems and structures."
        ];
        const Tiq = [
          "I enjoy analyzing and understanding how things work.",
          "I value logical consistency and coherence in ideas.",
          "I prefer to solve problems independently and methodically.",
          "I strive for precision and accuracy in my reasoning.",
          "I am skilled at identifying flaws or inconsistencies in arguments.",
          "I enjoy exploring theoretical frameworks and models.",
          "I am cautious about making decisions until I have thoroughly analyzed the situation.",
          "I am fascinated by abstract concepts and theories.",
          "I prioritize understanding concepts deeply over memorizing facts.",
          "I am driven to create logical systems and structures."
        ];

        const Feq = [
          "I am sensitive to the emotions and feelings of others.",
          "I enjoy creating harmony and fostering positive relationships.",
          "I often prioritize the needs and feelings of others over my own.",
          "I am skilled at empathizing with people and understanding their perspectives.",
          "I value cooperation and teamwork in achieving goals.",
          "I strive to create a supportive and inclusive environment.",
          "I enjoy socializing and connecting with others.",
          "I am good at mediating conflicts and finding common ground.",
          "I am motivated by making a positive impact on others' lives.",
          "I find fulfillment in helping and supporting others."
        ];

        const Fiq = [
          "I have strong personal values that guide my decisions and actions.",
          "I deeply care about authenticity and staying true to myself.",
          "I am empathetic and attuned to my own emotions and the emotions of others.",
          "I prioritize understanding my own feelings and motivations.",
          "I enjoy expressing myself creatively and authentically.",
          "I value close, meaningful relationships based on mutual understanding.",
          "I am sensitive to injustice and unfair treatment.",
          "I seek inner harmony and strive for personal growth.",
          "I am compassionate and caring towards others.",
          "I find fulfillment in living in alignment with my values."
        ];

        var niScore = 0;
        var neScore = 0;
        var siScore = 0;
        var seScore = 0;
        var tiScore = 0;
        var teScore = 0;
        var fiScore = 0;
        var feScore = 0;

        function questionDivs(questions, name) {
            var ranNums = [];
            var score = 0;

            // Generate unique random numbers
            for (var i = 0; i < 10; i++) {
                var ranNum;
                do {
                    ranNum = Math.floor(Math.random() * 10);
                } while (ranNums.includes(ranNum));
                ranNums.push(ranNum);
            }

            // Create divs with questions and input sliders
            for (var i = 0; i < 10; i++) {
                var newDiv = document.createElement("div");
                newDiv.classList.add("question-container");
                var questionItself = document.createElement("h3");
                questionItself.textContent = questions[ranNums[i]];
                questionItself.style.alignSelf = "center";
                var input = document.createElement("input");
                input.style.width = "80%";
                input.type = "range";
                input.min = "0";
                input.max = "100";
                input.value = "50";
                input.classList.add(name);
                var relate = document.createElement("h4");
                relate.innerText = "Very Relatable";
                relate.style.order = "3";
                var notrelate = document.createElement("h4");
                notrelate.innerText = "Not at All Relatable";
                notrelate.style.order = "1";
                input.addEventListener("input", function() {
                    score = 0;
                    var allInputs = document.querySelectorAll("." + name);
                    allInputs.forEach(function(input) {
                        score += parseInt(input.value);
                    });
                    updateScore(name, score);
                });
                input.style.order = "2";

                score += parseInt(input.value); // Accumulate initial score
                // Append elements to the container
                var slider = document.createElement("div");
                newDiv.appendChild(questionItself);
                newDiv.appendChild(slider);
                
                slider.appendChild(input);
                slider.appendChild(relate);
                slider.appendChild(notrelate);
                document.querySelector(".questions-container").appendChild(newDiv);
                slider.style.width = "95%";
                slider.style.display = "flex";
                slider.style.justifyContent = "space-between";
            }

            return score;
        }

        function updateScore(name, score) {
            switch (name) {
                case "ni":
                    niScore = score;
                    break;
                case "ne":
                    neScore = score;
                    break;
                case "si":
                    siScore = score;
                    break;
                case "se":
                    seScore = score;
                    break;
                case "ti":
                    tiScore = score;
                    break;
                case "te":
                    teScore = score;
                    break;
                case "fi":
                    fiScore = score;
                    break;
                case "fe":
                    feScore = score;
                    break;
                default:
                    break;
            }
            var totalScoresArray = [niScore, neScore, siScore, seScore, teScore, tiScore, feScore, fiScore];
            arrayN = ["ni", "ne", "si", "se", "te", "ti", "fe", "fi"];
            function sort(array, arrayN) {
                var unsorted = true;
                while (unsorted) {
                    unsorted = false;
                    for (var i = 0; i < array.length - 1; i++) {
                        if (array[i] < array[i + 1]) {
                            // Swap scores
                            var tempScore = array[i];
                            array[i] = array[i + 1];
                            array[i + 1] = tempScore;
                            
                            // Swap corresponding function names
                            var tempName = arrayN[i];
                            arrayN[i] = arrayN[i + 1];
                            arrayN[i + 1] = tempName;
                            
                            unsorted = true;
                        }
                    }
                }
            }


            sort(totalScoresArray, arrayN);
            var domF = arrayN[0];
            var auxf;
            var ns = false;
            var tf = false;
            var mbti = "";
            if(domF == "te"){
                for (var i = 1; i < 8; i++){
                    if(arrayN[i].includes("ni")){
                        auxf = "ni";
                        mbti = "ENTJ";
                        break;
                    }
                    if(arrayN[i].includes("si")){
                        auxf = "si";
                        mbti = "ESTJ";
                        break;
                    }
                }
            }else if(domF == "fe"){
                for (var i = 1; i < 8; i++){
                    if(arrayN[i].includes("ni")){
                        auxf = "ni";
                        mbti = "ENFJ";
                        break;
                    }
                    if(arrayN[i].includes("si")){
                        auxf = "si";
                        mbti = "ESFJ";
                        break;
                    }
                }
            }else if(domF == "fi"){
                for (var i = 1; i < 8; i++){
                    if(arrayN[i].includes("ne")){
                        auxf = "ne";
                        mbti = "INFP";
                        break;
                    }
                    if(arrayN[i].includes("se")){
                        auxf = "se";
                        mbti = "ISFP";
                        break;
                    }
                }
            }else if(domF == "ti"){
                for (var i = 1; i < 8; i++){
                    if(arrayN[i].includes("ne")){
                        auxf = "ne";
                        mbti = "INTP";
                        break;
                    }
                    if(arrayN[i].includes("se")){
                        auxf = "se";
                        mbti = "ISTP";
                        break;
                    }
                }
            }else if(domF == "ne"){
                for (var i = 1; i < 8; i++){
                    if(arrayN[i].includes("ti")){
                        auxf = "ti";
                        mbti = "ENTP";
                        break;
                    }
                    if(arrayN[i].includes("fi")){
                        auxf = "fi";
                        mbti = "ENFP";
                        break;
                    }
                }
            }else if(domF == "se"){
                for (var i = 1; i < 8; i++){
                    if(arrayN[i].includes("ti")){
                        auxf = "ti";
                        mbti = "ESTP";
                        break;
                    }
                    if(arrayN[i].includes("fi")){
                        auxf = "fi";
                        mbti = "ESFP";
                        break;
                    }
                }
            }else if(domF == "ni"){
                for (var i = 1; i < 8; i++){
                    if(arrayN[i].includes("te")){
                        auxf = "te";
                        mbti = "INTJ";
                        break;
                    }
                    if(arrayN[i].includes("fe")){
                        auxf = "fe";
                        mbti = "INFJ";
                        break;
                    }
                }
            }else if(domF == "si"){
                for (var i = 1; i < 8; i++){
                    if(arrayN[i].includes("te")){
                        auxf = "te";
                        mbti = "ISTJ";
                        break;
                    }
                    if(arrayN[i].includes("fe")){
                        auxf = "fe";
                        mbti = "ISFJ";
                        break;
                    }
                }
            }
            
            // Update results display
            var resultsDiv = document.querySelector(".results");
            resultsDiv.innerHTML = `
                <h1>Your MBTI: ${mbti}</h1>
                <h2>Ni Score: ${niScore}/1000</h2>
                <h2>Ne Score: ${neScore}/1000</h2>
                <h2>Si Score: ${siScore}/1000</h2>
                <h2>Se Score: ${seScore}/1000</h2>
                <h2>Ti Score: ${tiScore}/1000</h2>
                <h2>Te Score: ${teScore}/1000</h2>
                <h2>Fi Score: ${fiScore}/1000</h2>
                <h2>Fe Score: ${feScore}/1000</h2>
            `;
        }

        // Call the function for each cognitive function and store scores
        niScore = questionDivs(Niq, "ni");
        neScore = questionDivs(Neq, "ne");
        siScore = questionDivs(Siq, "si");
        seScore = questionDivs(Seq, "se");
        tiScore = questionDivs(Tiq, "ti");
        teScore = questionDivs(Teq, "te");
        fiScore = questionDivs(Fiq, "fi");
        feScore = questionDivs(Feq, "fe");

        // Initial results display
        updateScore("ni", niScore);
        updateScore("ne", neScore);
        updateScore("si", siScore);
        updateScore("se", seScore);
        updateScore("ti", tiScore);
        updateScore("te", teScore);
        updateScore("fi", fiScore);
        updateScore("fe", feScore);

        function toggleResults() {
            var resultsDiv = document.querySelector(".results");
            var questionsContainer = document.querySelector(".questions-container");
            resultsDiv.classList.toggle("hidden");
            questionsContainer.classList.toggle("hidden");

            var submitButton = document.querySelector(".submit");
            var previousButton = document.querySelector(".previous");

            submitButton.classList.toggle("hidden");
            previousButton.classList.toggle("hidden");

            document.body.classList.toggle("bodyback");
            
        }

        // Add event listener to toggle results button
        var toggleButton = document.querySelector(".submit");
        toggleButton.addEventListener("click", toggleResults);

        // Functionality for Previous button (if needed)
        var previousButton = document.querySelector(".previous");
        previousButton.addEventListener("click", toggleResults);
        
    </script>
</body>
</html>
